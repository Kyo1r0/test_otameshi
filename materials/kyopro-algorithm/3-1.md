## テクニック 3 (累積和) PART1

### 累積和とは何か？

累積和とは、数列の各項までの和を計算することにより、数列の連続する部分列の和を効率的に計算することができる手法です。

#### 累積和の計算方法

与えられた数列 $(a_1, a_2, a_3, \ldots, a_n)$ に対して、その累積和の数列 $(S_0, S_1, S_2, S_3, \ldots, S_n)$ は以下のように計算できます。
（$S_0$ は和を計算しやすくするために便宜上追加しています。）

$S_i = \sum_{j=1}^{i} a_j = S_{i - 1} + a_i$

これは、最初の $i$ 項までの和を表します。すなわち、それぞれの値は以下のようになります。

$$
S_0 = 0 \\
S_1 = a_1 \\
S_2 = a_1 + a_2 \\
S_3 = a_1 + a_2 + a_3 \\
\vdots \\
S_n = a_1 + a_2 + a_3 + \ldots + a_n 
$$

例として、数列 $(2, 1, 3, 4, 5)$ の累積和を求めてみましょう。

$$
S_0 = 0 \\
S_1 = 2 \\
S_2 = 2 + 1 = 3 \\
S_3 = 2 + 1 + 3 = 6 \\
S_4 = 2 + 1 + 3 + 4 = 10 \\
S_5 = 2 + 1 + 3 + 4 + 5 = 15
$$

したがって、元の数列 $(2, 1, 3, 4, 5)$ に対する累積和の数列は $(0, 2, 3, 6, 10, 15)$ です。

#### 累積和の応用例

累積和は、基本的には特定の範囲の和を効率的に計算するために使用されます。例えば、数列の $i$ 番目から $j$ 番目までの部分和を求める場合、累積和を使うと次のように計算できます。

$\sum_{k=i}^{j} a_k = S_j - S_{i - 1}$

ここで、$S_j$ は $a_1$ から $a_j$ までの和、$S_{i-1}$ は $a_1$ から $a_{i-1}$ までの和を表しているため確かに計算できていることが分かります。

また、特殊な使用例として、ある範囲に定数を加算するという操作を計算する場合にも使用されます。

数列の $l$ 番目から $r$ 番目に定数 $k$ を加算するというのは、数列の $l$ 番目に $k$ を加算、$r + 1$ 番目に $-k$ を加算し、累積和を計算したものと対応しています。

例えば、数列 $(0, 0, 0, 0, 0, 0)$ の $2$ 番目から $4$ 番目に $5$ を加算した数列は、$(0, 5, 0, 0, -5, 0)$ の累積和を計算したものと対応します。（実際に累積和を計算して確認してみましょう！）
